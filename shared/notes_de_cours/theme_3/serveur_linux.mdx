## ğŸ¯ Objectif

Vous allez :
1. Dupliquer votre machine virtuelle Ubuntu sous VMware Workstation Pro.
2. Configurer une premiÃ¨re VM comme **serveur web**.
3. Utiliser une seconde VM comme **client**.
4. Servir un petit site statique Ã  l'aide de **Python (HTTP)**.

:::warning

Pour le projet 2, vous devez fournir des captures d'Ã©cran de chaque Ã©tape rÃ©alisÃ©e
ainsi qu'une brÃ¨ve description de ce que vous avez fait.

:::

---

## ğŸ§© Ã‰tape 1 â€” Cloner la machine virtuelle

PlutÃ´t que de refaire toute lâ€™installation dâ€™Ubuntu, nous allons cloner la VM existante.
Ainsi, les deux machines auront la mÃªme configuration de base.

1. Dans VMware Workstation Pro, choisir votre VM Ubuntu et dans le menu cliquer sur :
   `VM > Manage > Clone ...`

   ![Cloner une VM dans VMware](/img/serveur_linux/vm_clone.png)

2. Suivre lâ€™assistant et crÃ©er une copie complÃ¨te (Full Clone).

    ![Assistant de clonage dans VMware](/img/serveur_linux/vm_full_clone.png)

---

## ğŸ§± Ã‰tape 2 â€” PrÃ©parer le rÃ©pertoire du serveur

Les fichiers du site web seront stockÃ©s dans un rÃ©pertoire spÃ©cifique.

1. Sur la **machine serveur**, crÃ©ez un dossier pour votre site. Par exemple depuis le terminal tappez :
   ```bash
   mkdir -p ~/site_web
   cd site_web
   ```

    ou utilisez lâ€™explorateur de fichiers ou VS Code pour crÃ©er ce dossier.

2. Ajoutez des fichiers HTML de test dans ce rÃ©pertoire. Vous pouvez par exemple utiliser VS Code
   pour crÃ©er ces fichiers. Ajouter des liens entre les pages pour naviguer.

    :::warning

    Assurez-vous d'avoir un fichier qui s'appelle `index.html` pour que le serveur le trouve automatiquement.
    C'est ce fichier qui sera affichÃ© par dÃ©faut lorsque vous accÃ©dez au serveur.

    :::

---

## ğŸ”¥ Ã‰tape 3 â€” Configurer le pare-feu

Un serveur n'accepte pas toutes les connexions par dÃ©faut. Le pare-feu 
gÃ¨re les rÃ¨gles d'accÃ¨s rÃ©seau. Il permet de sÃ©curiser le serveur en limitant les accÃ¨s aux
seuls services nÃ©cessaires. Ici, nous ouvrons seulement le port 8000 (serveur Python). 
Les ports sont des "portes" logiques par lesquelles les
donnÃ©es entrent et sortent. Ils sont identifiÃ©s par des numÃ©ros et sont
associÃ©s Ã  des services spÃ©cifiques. Chaque adresse IP peut avoir jusqu'Ã  65535
ports.

1. Activez `ufw` et autorisez le port nÃ©cessaire avec le terminal de la VM
   serveur. Les commandes suivantes mettent Ã  jour la liste des paquets,
   installent `ufw` qui gÃ¨re le pare-feu, ouvrent le port 8000,
   activent le pare-feu et affichent son statut :

   ```bash
   sudo apt update
   sudo apt install ufw -y
   sudo ufw allow 8000/tcp    # Port pour le serveur Python
   sudo ufw enable
   sudo ufw status
   ```

---

## ğŸ Ã‰tape 4 â€” Lancer un petit serveur Python

Python inclut un mini serveur HTTP trÃ¨s simple Ã  utiliser. Il suffit
d'utiliser le module `http.server`. Ce serveur va partager les fichiers
du dossier courant. Toujours en utilisant le terminal de la VM serveur depuis
le dossier `site_web` crÃ©Ã© prÃ©cÃ©demment, lancez le serveur avec la commande suivante :

```bash
python3 -m http.server 8000
```

Cela va dÃ©marrer le serveur sur le port 8000. Testez dans un navigateur Ã 
   lâ€™intÃ©rieur de la machine serveur en allant Ã  lâ€™adresse :
   `http://127.0.0.1:8000`

---

## ğŸŒ Ã‰tape 5 â€” Obtenir l'adresse IP du serveur

Pour que la machine cliente puisse se connecter au serveur, vous devez connaÃ®tre l'adresse IP du serveur.

1. Sur la **VM serveur**, dans un nouveau terminal (gardez le serveur Python actif), tapez :
   ```bash
   hostname -I
   ```

2. Notez l'adresse IP affichÃ©e (par exemple : `192.168.0.105`).

:::info

Cette commande affiche toutes les adresses IP de la
machine. Prenez la premiÃ¨re adresse qui ressemble Ã  `192.168.x.x` ou
`10.x.x.x`.

:::

---

## ğŸ’» Ã‰tape 6 â€” Tester depuis la machine cliente

1. Depuis la **VM client**, ouvrez un navigateur web.
2. Tapez l'adresse IP de la VM serveur suivie du port 8000. Par exemple si l'adresse IP
   du serveur est `192.168.0.105`, tapez :

   ```
   http://192.168.0.105:8000
   ```

3. Vous devriez voir apparaÃ®tre votre site web avec le contenu du fichier `index.html`.
4. Naviguez entre les diffÃ©rentes pages pour vÃ©rifier que tout fonctionne.

:::info

ğŸ‘ FÃ©licitations ! Vous avez mis en place un mini serveur web !

:::

---

## ğŸ§° Ã‰tape 7 â€” ArrÃªter le serveur

Pour arrÃªter le serveur Python, retournez dans le terminal oÃ¹ il s'exÃ©cute et appuyez sur : `Ctrl + C`

---

## ğŸ§¾ Ce qui manque pour Ãªtre comme un vrai serveur de production

Notre configuration est suffisante pour des tests en rÃ©seau local, mais
pas pour l'internet public. Un vrai serveur nÃ©cessite chiffrement, sÃ©curitÃ©,
supervision et nom de domaine.


| Ã‰lÃ©ment                     | Description                                                | Pourquoi                                             |
| --------------------------- | ---------------------------------------------------------- | ---------------------------------------------------- |
| ğŸ”’ HTTPS / SSL              | Utiliser des certificats SSL/TLS                           | SÃ©curise les Ã©changes, obligatoire pour un vrai site |
| âš™ï¸ Serveur web professionnel| Utiliser Nginx, Apache ou Gunicorn                         | Plus performant et sÃ©curisÃ© que le serveur Python    |
| ğŸ” Pare-feu plus restrictif | Autoriser uniquement ports 22, 80, 443                     | RÃ©duit la surface d'attaque                          |
| ğŸ§ Utilisateur non-root     | ExÃ©cuter le code sous un utilisateur dÃ©diÃ©                 | Ã‰vite les privilÃ¨ges excessifs                       |
| ğŸ”„ Supervision / logs       | Analyser les logs et automatiser les redÃ©marrages          | Assure la fiabilitÃ©                                  |
| ğŸŒ Nom de domaine           | Associer un DNS public                                     | AccÃ¨s facile sans IP                                 |
| ğŸš€ DÃ©marrage automatique    | CrÃ©er un service systemd                                   | Le serveur redÃ©marre automatiquement                 |



